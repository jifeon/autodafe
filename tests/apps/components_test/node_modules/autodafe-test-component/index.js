var autodafe = require('../../../../../');

module.exports = autodafe.Component.extend({
    _RequestConstructor: require('./TestRequest'),

    get: function (p) {
        return p;
    },

    makeRequest: function () {
        this._createRequest();
    },

    makeAsyncRequest: function () {
        return this._createRequest({type: 'async'});
    },

    processRequest: function (request, callback) {
        if (request.getType() == 'async') {
            request.processed = false;
            setTimeout(callback, 20);
            return;
        }

        if (!request.order) {
            request.order = [this.getName()];
        }
        else {
            request.order.push(this.getName());
        }
        callback();
    }
});